<fieldset class="fs-detail inventory_boxes">
	<legend>Inventory Detail</legend>
	<table class="tb-fields">
		<tbody>
			{{- if .inv.inventory_id }}
			<tr>
				<th>ID</th>
				<td>{{ .inv.inventory_id }}
				<td>
			</tr>
			{{- end}}

			{{- if .user}}
			{{- if .inv.container_path_cache }}
			<tr>
				<th>Location</th>
				<td>{{ .inv.container_path_cache }}
				<td>
			</tr>
			{{- end }}
			{{- if .inv.barcode }}
			<tr>
				<th>Barcode</th>
				<td>{{ .inv.barcode }}
				<td>
			</tr>
			{{- end }}
			{{- if .inv.container_alt_barcode }}
			<tr>
				<th>Alt. Barcode</th>
				<td>{{ .inv.container_alt_barcode }}
				<td>
			</tr>
			{{- end }}
			{{- end}}

			{{- if .inv.dggs_sample_id }}
			<tr>
				<th>DGGS Sample ID</th>
				<td>{{ .inv.dggs_sample_id }}
				<td>
			</tr>
			{{- end }}
			{{- if .inv.sample_number }}
			<tr>
				<th>Sample Number</th>
				<td>{{ .inv.sample_number }}
				<td>
			</tr>
			{{- end }}
			{{- if .inv.sample_number_prefix }}
			<tr>
				<th>Sample Number Prefix</th>
				<td>{{.inv.sample_number_prefix}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.alt_sample_number}}
			<tr>
				<th>Alternative Sample Number</th>
				<td>{{.inv.alt_sample_number}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.published_sample_number}}
			<tr>
				<th>Published Sample No.</th>
				<td>{{.inv.published_sample_number}} {{.inv.published_number_has_suffix}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.collection_name}}
			<tr>
				<th>Collection</th>
				<td>{{.inv.collection_name}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.state_number}}
			<tr>
				<th>State Number</th>
				<td>{{.inv.state_number}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.box_number}}
			<tr>
				<th>Box Number</th>
				<td>{{.inv.box_number}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.set_number}}
			<tr>
				<th>Set Number</th>
				<td>{{.inv.set_number}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.split_number}}
			<tr>
				<th>Split Number</th>
				<td>{{.inv.split_number}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.slide_number}}
			<tr>
				<th>Slide Number</th>
				<td>{{.inv.slide_number}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.slip_number}}
			<tr>
				<th>slip_number</th>
				<td>{{.inv.slip_number}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.lab_number}}
			<tr>
				<th>Lab Number</th>
				<td>{{.inv.lab_number}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.lab_report_id}}
			<tr>
				<th>Lab Report ID</th>
				<td>{{.inv.lab_report_id}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.core_number}}
			<tr>
				<th>Core Number</th>
				<td>{{.inv.core_number}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.core_diameter}}
			<tr>
				<th>Core Diameter</th>
				<td>{{.inv.core_diameter}} {{.inv.unit}}
					{{- if .inv.core_diameter_name}} ({{.inv.core_diameter_name}}){{- end}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.interval_top}}
			<tr>
				<th>Interval Top</th>
				<td>{{.inv.interval_top}} {{.inv.interval_unit}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.interval_bottom}}
			<tr>
				<th>Interval Bottom</th>
				<td>{{.inv.interval_bottom}} {{.inv.interval_unit}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.description}}
			<tr>
				<th>Description</th>
				<td>{{.inv.description}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.remark}}
			<tr>
				<th>Remark</th>
				<td>{{.inv.remark}}
				<td>
			</tr>
			{{- end}}

			{{- if .user}}
			{{- if .inv.tray}}
			<tr>
				<th>Tray</th>
				<td>{{.inv.tray}}
				<td>
			</tr>
			{{- end}}
			{{- end}}

			{{- if .inv.weight}}
			<tr>
				<th>Weight</th>
				<td>{{.inv.weight}} {{.inv.weight_unit}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.sample_frequency}}
			<tr>
				<th>Sample Frequency</th>
				<td>{{.inv.sample_frequency}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.recovery}}
			<tr>
				<th>Recovery</th>
				<td>{{.inv.recovery}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.radiation_msvh}}
			<tr>
				<th>Radiation</th>
				<td>{{.inv.radiation_msvh}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.keywords}}
			<tr>
				<th>Keywords</th>
				<td><a href="../search#keyword={{.inv.keywords}}">{{.inv.keywords}}</a>
			</tr>
			{{- end}}

			{{- if .user}}
			{{- if .inv.received_date}}
			<tr>
				<th>Received Date</th>
				<td>{{formattime "1/2/2006" .inv.received_date}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.entered_date}}
			<tr>
				<th>Entered Date</th>
				<td>{{formattime "1/2/2006" .inv.entered_date}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.modified_user}}
			<tr>
				<th>Last Modified By</th>
				<td>{{.inv.modified_user}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.modified_date}}
			<tr>
				<th>Modified Date</th>
				<td>{{formattime "1/2/2006" .inv.modified_date}}
				<td>
			</tr>
			{{- end}}
			{{- if .inv.can_publish}}
			<tr>
				<th>Publish</th>
				<td>Yes</td>
			</tr>
			{{- end}}
			{{- if not .inv.can_publish }}
			<tr>
				<th>Publish</th>
				<td>No</td>
			</tr>
			{{- end }}
			{{- if .inv.active}}
			<tr>
				<th>Active</th>
				<td>Yes</td>
			</tr>
			{{- end}}
			{{- if not .inv.active }}
			<tr>
				<th>Active</th>
				<td>No</td>
			</tr>
			{{- end }}
			{{- end}}
		</tbody>
	</table>
</fieldset>

{{- if .inv.geojson}}

<fieldset class="fs-map">
	<legend>Geospatial</legend>
	<div id="map"></div>
	<div id="popup" class="ol-popup">
		<div class="ol-popup-top">
			<div class="ol-popup-top-title">Borehole(s)</div>
			<div id="popup-closer">&#215;</div>
		</div>
		<div id="popup-content" class="ol-popup-content"></div>
	</div>
	<script>
		var geojson = {{rawjs .inv.geojson}};
	</script>
</fieldset>
<div class="flex-break"></div>
{{- end}}

{{- if .inv.boreholes}}
<fieldset>
	<legend>Prospect(s)</legend>
	<table class="tb-fields">
		<tbody>
			{{- range .inv.boreholes}}
			{{- if .prospect_name}}
			<tr>
				<th>Prospect Name</th>
				<td><a href="../prospect/{{.prospect_id}}">{{.prospect_name}}</a>
				<td>
			</tr>
			{{- end}}
			{{- if .ardf_number}}
			<tr>
				<th>Prospect ARDF</th>
				<td><a href="http://mrdata.usgs.gov/ardf/show.php?labno={{.ardf_numer}}">{{.ardf_number}}</td>
			</tr>
			{{- end}}
			{{- if .borehole_name}}
			<tr>
				<th>Borehole Name</th>
				<td><a href="../borehole/{{.borehole_id}}">{{.borehole_name}}</td>
			</tr>
			{{- end}}
			{{- if .alt_names}}
			<tr>
				<th>Borehole Alt. Name(s)</th>
				<td>{{.alt_names}}</td>
			</tr>
			{{- end}}
			{{- end}}
		</tbody>
	</table>
</fieldset>
{{- end}}

{{- if .inv.wells}}
<fieldset>
	<legend>Well(s)</legend>
	<table class="tb-fields">
		<tbody>
			{{- range .inv.wells}}
			{{- if .is_current}}
			{{- if .well_name}}
			<tr>
				<th>Well Name</th>
				<td><a href="../well/{{.well_id}}">{{.well_name}}</a>
				<td>
			</tr>
			{{- end}}
			{{- if .alt_names}}
			<tr>
				<th>Well Alt. Name</th>
				<td>{{.alt_names}}</td>
			</tr>
			{{- end}}
			{{- if .well_number}}
			<tr>
				<th>Well Number</th>
				<td>{{.well_number}}</td>
			</tr>
			{{- end}}
			{{- if .api_number}}
			<tr>
				<th>API Number</th>
				<td>{{.api_number}}</td>
			</tr>
			{{- end}}
			{{- if .operator_name}}
			<tr>
				<th>Current Operator</th>
				<td>{{.operator_name}}</td>
			</tr>
			{{- end}}
			{{- if .operator_type}}
			<tr>
				<th>Operator Type</th>
				<td>{{.operator_type}}</td>
			</tr>
			{{- end}}
			<tr class="horizontal-spacer">
				<td></td>
			</tr>
			{{- end}}
			{{- end}}
		</tbody>
	</table>
</fieldset>
{{- end}}

{{- if .inv.shotlines}}
<fieldset>
	<legend>Shotline(s)</legend>
	<table class="tb-fields">
		<tbody>
			{{- range .inv.shotlines}}
			{{- if .name}}
			<tr>
				<th>Shotline Name</th>
				<td><a href="../shotline/{{.shotline_id}}">{{.name}}</a>
				<td>
			</tr>
			{{- end}}
			{{- if .alt_names}}
			<tr>
				<th>Shotline Alt. Name</th>
				<td>{{.alt_names}}</td>
			</tr>
			{{- end}}
			{{- if .year}}
			<tr>
				<th>Shotline Year</th>
				<td>{{.year}}</td>
			</tr>
			{{- end}}
			{{- if .shotpoint_number}}
			<tr>
				<th>Shotpoint</th>
				<td>{{.shotpoint_number}}</td>
			</tr>
			{{- end}}
			<tr class="horizontal-spacer">
				<td></td>
			</tr>
			{{- end}}
		</tbody>
	</table>
</fieldset>
{{- end}}

{{- if .inv.outcrops}}
<fieldset>
	<legend>Outcrop(s)</legend>
	<table class="tb-fields">
		<tbody>
			{{- range .inv.outcrops}}
			{{- if .name}}
			<tr>
				<th>Outcrop Name</th>
				<td><a href="../outcrop/{{.outcrop_id}}">{{.name}}</a>
				<td>
			</tr>
			{{- end}}
			{{- if .outcrop_number}}
			<tr>
				<th>Outcrop Number</th>
				<td>{{.outcrop_number}}</td>
			</tr>
			{{- end}}
			{{- if .year}}
			<tr>
				<th>Outcrop Year</th>
				<td>{{.year}}</td>
			</tr>
			{{- end}}
			<tr class="horizontal-spacer">
				<td></td>
			</tr>
			{{- end}}
		</tbody>
	</table>
</fieldset>
{{- end}}

{{- if .inv.urls}}
<fieldset class="urls">
	<legend>URLs</legend>
	{{- range .inv.urls}}
	<div style="margin: 5px;"><a href="{{.url}}">{{.description}}</a> ({{.url_type}})</div>
	{{- end}}
</fieldset>
{{- end}}

{{- if .inv.files}}
<fieldset class="files">
	<legend>Files</legend>
	{{- range .inv.files}}
	<div><a href="../file/{{.file_id}}/{{.file_name}}">{{.file_name}}</a> ({{.file_size}})</div>
	{{- end}}
</fieldset>
{{- end}}

{{- if .user}}
{{- if .inv.publications}}
<fieldset>
	<legend>Publication(s)</legend>
	<table class="tb-fields" style="max-width:600px;">
		<tbody>
			{{- range .inv.publications}}
			{{- if .title}}
			<tr>
				<th>Title</th>
				<td>{{ .title }}
				<td>
			</tr>
			{{- end}}
			{{- if .year}}
			<tr>
				<th>Year</th>
				<td>{{ .year }}
				<td>
			</tr>
			{{- end}}
			{{- if .publication_type}}
			<tr>
				<th>Type</th>
				<td>{{ .publication_type }}
				<td>
			</tr>
			{{- end}}
			{{- if .publication_number}}
			<tr>
				<th>Number</th>
				<td>{{ .publication_number }}
				<td>
			</tr>
			{{- end}}
			{{- if .publication_series}}
			<tr>
				<th>Series</th>
				<td>{{ .publication_series }}
				<td>
			</tr>
			{{- end}}
			{{- if .description}}
			<tr>
				<th>Description</th>
				<td>{{ .description }}
				<td>
			</tr>
			{{- end}}
			{{- if .can_publish}}
			<tr>
				<th>Publish</th>
				<td>{{- if .can_publish}} yes {{- end}} {{- if not .can_publish}} no {{- end}}
				<td>
			</tr>
			{{- end}}
			<tr class="horizontal-spacer">
				<td></td>
			</tr>
			{{- end}}
		</tbody>
	</table>
</fieldset>
{{- end}}
{{- end}}

{{- if .user}}
{{- if .inv.notes}}
<fieldset>
	<legend>Notes</legend>
	<table class="tb-fields" style="max-width:600px;">
		<thead>
			<tr>
				<th style="padding-right: 10px">Date</th>
				<th style="padding-right: 10px">User</th>
				<th style="padding-right: 10px">Public</th>
				<th style="padding-right: 10px;">Note</th>
			</tr>
		</thead>
		<tbody>
			{{- range .inv.notes}}
			<tr>
				<td>{{formattime "1/2/2006" .note_date}}</td>
				<td>{{.username}}</td>
				<td>{{- if .is_public}} yes {{- end}} {{- if not .is_public}} no {{- end}}</td>
				<td>{{.note}}</td>
			</tr>
		</tbody>
		{{- end}}
	</table>
</fieldset>
{{- end}}
{{- end}}

{{- if .user}}
{{- if .inv.qualities}}
<fieldset>
	<legend>QA</legend>
	<table class="tb-fields" style="max-width:600px;">
		<tbody>
			{{- range .inv.qualities}}
			{{- if .check_date}}
			<tr>
				<th>Date</th>
				<td>{{formattime "1/2/2006" .check_date}}</td>
			</tr>
			{{- end}}
			{{- if .username}}
			<tr>
				<th>User</th>
				<td>{{.username}}</td>
			</tr>
			{{- end}}
			{{- if .issues}}
			<tr>
				<th>Issues</th>
				<td>{{.issues}}</td>
			</tr>
			{{- end}}
			{{- if .remark}}
			<tr>
				<th>Remark</th>
				<td>{{.remark}}</td>
			</tr>
			{{- end}}
		</tbody>
		{{- end}}
	</table>
</fieldset>
{{- end}}
{{- end}}

{{- if .user}}
{{- if .inv.containerlog}}
<fieldset class = "inventory_boxes">
	<legend>Tracking</legend>
	<table class="tb-fields" style="max-width:600px;">
		<tbody>
			{{- range .inv.containerlog}}
			<tr>
				<td>{{formattime "1/2/2006" .log_date}} <strong>{{.destination}}</strong></td>
			</tr>
		</tbody>
		{{- end}}
	</table>
</fieldset>
{{- end}}
{{- end}}

{{- if .user}}
<fieldset class = "inventory_boxes">
	<legend>Stash</legend>
	<button id="stash-link" type="submit">Show Stash</button>
		<div id="stash-dd"></div>
</fieldset>
{{- end}}

<script src="../js/utility.js"></script>
<script type="text/javascript">
	var stash = document.getElementById('stash-link');
		if(stash !== null){
			stash.onclick = function(evt){
				var anchor = this;
				if(this.innerHTML === 'Show Stash'){
					var xhr = (window.ActiveXObject ? new ActiveXObject('Microsoft.XMLHTTP') : new XMLHttpRequest());
					xhr.onreadystatechange = function(){
						if(xhr.readyState === 4 && xhr.status === 200){
							var json = JSON.parse(xhr.responseText);
							var el = JSONToElement(json.stash);
							document.getElementById('stash-dd').appendChild(el);
							anchor.innerHTML = 'Hide Stash';
						}
					};
					xhr.open('GET', 'http://127.0.0.1:8080/stash/'+ {{.inv.inventory_id}}, true);
					xhr.send();
				} else {
					anchor.innerHTML = 'Show Stash';
					var dd = document.getElementById('stash-dd');
					if(dd !== null){
						while(dd.lastChild) dd.removeChild(dd.lastChild);
					}
				}
				var e = evt === undefined ? window.event : evt;
				if('preventDefault' in e) e.preventDefault();
				return false;
			};
		}
</script>
